# ============================================================================
# Cassey Environment Configuration
# ============================================================================
# This file contains ONLY secrets and environment-specific overrides.
# Application defaults are in config.yaml.
#
# Copy this file to .env and fill in your values.
# ============================================================================

# ============================================================================
# LLM Provider Configuration
# ============================================================================

# Choose your LLM provider (overrides config.yaml default)
# Options: anthropic, openai, zhipu, ollama
# DEFAULT_LLM_PROVIDER=anthropic

# Anthropic (Claude)
ANTHROPIC_API_KEY=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

# OpenAI
OPENAI_API_KEY=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

# Zhipu AI
ZHIPUAI_API_KEY=fe487af6103a4f2e98d5b239851f51f8.BHwH27B2sVkafKWJ

# Ollama Cloud (if using OLLAMA_MODE=cloud)
OLLAMA_CLOUD_API_KEY=046845d8d9234a1694cecea204f3e459.QK7vLNdmE0vhmNvXO-DymlEx

# ============================================================================
# Channel Configuration
# ============================================================================

# Active channels (comma-separated: telegram,http)
# CASSEY_CHANNELS=telegram,http

# Telegram Bot
TELEGRAM_BOT_TOKEN=8567338898:AAFHIs3FSmZDJecT_7XumgcbX0J22q1NK94
# TELEGRAM_WEBHOOK_URL=https://your-domain.com/webhook
# TELEGRAM_WEBHOOK_SECRET=your-secret

# HTTP Channel (override config.yaml defaults)
# HTTP_HOST=0.0.0.0
# HTTP_PORT=8000

# ============================================================================
# Database Configuration
# ============================================================================

# PostgreSQL password
POSTGRES_PASSWORD=cassey_password

# For remote PostgreSQL (overrides config.yaml defaults)
# POSTGRES_HOST=localhost
# POSTGRES_PORT=5432
# POSTGRES_USER=cassey
# POSTGRES_DB=cassey_db

# ============================================================================
# External Services
# ============================================================================

# Web Search (SearXNG)
SEARXNG_HOST=https://searxng.research-stack.gongchatea.com.au

# Firecrawl (web scraping)
FIRECRAWL_API_KEY=fc-your-firecrawl-api-key
FIRECRAWL_API_URL=https://firecrawl.research-stack.gongchatea.com.au  # Override if using self-hosted

# Temporal Workflow (optional)
TEMPORAL_HOST=temporal.gongchatea.com.au
# TEMPORAL_PORT=7233
# TEMPORAL_NAMESPACE=default
# TEMPORAL_TASK_QUEUE=cassey-workflows
# TEMPORAL_WEB_UI_URL=http://localhost:8080

# ============================================================================
# Optional Overrides
# ============================================================================
# Override any config.yaml value here if needed for your environment.

# Example: Override storage paths for deployment
# USERS_ROOT=/var/lib/cassey/users
# GROUPS_ROOT=/var/lib/cassey/groups
# SHARED_ROOT=/var/lib/cassey/shared

# Example: Change storage backend
# CHECKPOINT_STORAGE=memory

# Example: Change log level
# LOG_LEVEL=DEBUG










# LLM Provider (anthropic | openai | zhipu)
DEFAULT_LLM_PROVIDER=openai

# API Keys - Please add your keys here
ANTHROPIC_API_KEY=

# Telegram

TELEGRAM_WEBHOOK_URL=
TELEGRAM_WEBHOOK_SECRET=

# Storage
CHECKPOINT_STORAGE=postgres

# PostgreSQL Configuration
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_USER=cassey
POSTGRES_PASSWORD=cassey_password
POSTGRES_DB=cassey_db

# Security
MAX_FILE_SIZE_MB=10

# Thread-scoped storage root
USERS_ROOT=./data/users

# Shared DB (organization-wide)
SHARED_DB_PATH=./data/shared/shared.db

# Admin access (comma-separated IDs)

# Agent runtime (langchain | custom)
AGENT_RUNTIME=langchain
AGENT_RUNTIME_FALLBACK=

# Channels
CASSEY_CHANNELS=telegram,http
TZ=Australia/Sydney

# Context Management
MAX_CONTEXT_TOKENS=100000  # Max tokens before trimming (adjust per model)
ENABLE_SUMMARIZATION=true  # Enable running summaries (true/false)
SUMMARY_THRESHOLD=20  # Summarize after N messages
MAX_ITERATIONS=50  # Maximum agent reasoning steps before giving up

# Web Search
SEARXNG_HOST=https://searxng.research-stack.gongchatea.com.au

# Logging
LOG_LEVEL=INFO  # DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_FILE=cassey.log  # Optional: path to log file (e.g., cassey.log)

# Firecrawl (web scraping API)
FIRECRAWL_API_KEY=fc-your-api-key-if-required
FIRECRAWL_API_URL=https://firecrawl.research-stack.gongchatea.com.au

# LangChain middleware
MW_SUMMARIZATION_ENABLED=true
MW_SUMMARIZATION_MAX_TOKENS=10000
MW_SUMMARIZATION_TARGET_TOKENS=2000
MW_MODEL_CALL_LIMIT=50
MW_TOOL_CALL_LIMIT=100
MW_TOOL_RETRY_ENABLED=true
MW_MODEL_RETRY_ENABLED=true
MW_HITL_ENABLED=false
MW_TODO_LIST_ENABLED=true
MW_CONTEXT_EDITING_ENABLED=false
MW_CONTEXT_EDITING_TRIGGER_TOKENS=100000
MW_CONTEXT_EDITING_KEEP_TOOL_USES=10

# SeekDB (KB backend)
SEEKDB_EMBEDDING_MODE=default
SEEKDB_FULLTEXT_PARSER=space
SEEKDB_DISTANCE_METRIC=cosine
SEEKDB_DATABASE=kb

# Memory (Embedded User Memories)
MEM_AUTO_EXTRACT=false
MEM_CONFIDENCE_MIN=0.6
MEM_MAX_PER_TURN=3
MEM_EXTRACT_MODEL=gpt-4o-mini
MEM_EXTRACT_PROVIDER=openai
MEM_EXTRACT_TEMPERATURE=0.0

# OCR (local)
OCR_ENGINE=paddleocr
OCR_LANG=en
OCR_USE_GPU=false
OCR_MAX_FILE_MB=10
OCR_MAX_PAGES=3
OCR_PDF_DPI=200
OCR_PDF_MIN_TEXT_CHARS=5
OCR_TIMEOUT_SECONDS=30
OCR_STRUCTURED_MODEL=fast
OCR_STRUCTURED_PROVIDER=
OCR_STRUCTURED_MAX_RETRIES=2
